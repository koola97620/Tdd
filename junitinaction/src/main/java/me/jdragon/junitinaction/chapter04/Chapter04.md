# 04 소프트웨어 테스트 원칙

## 4.1 단위 테스트가 필요한 이유

단위 테스트의 주 목적은 기대한 대로 잘 동작하는지 증명하고, 버그를 조기에 잡아내기 위함이다

단위테스트 특징
- 기능 테스트보다 훨씬 높은 테스트 커버뤼지
- 팀 생산성 향상?
- 회귀 테스트를 수행하고 디버깅의 필요성을 줄여준다
- 리팩토링과 코드 수정 시 올바로 하고 있다는 확신을 보여준다 (검증)
- 구현 품질 향상
- 기대하는 행위를 문서화
- 코드 커버리지 등 각종 측정을 가능하게 한다

### 4.1.1 높은 테스트 커버리지 달성

단위 테스트는 가장 먼저 수행되어야 할 테스트다
기능 테스트는 애플리케이션 코드의 약 70%? 를 커버하지만 단위테스틑 더 높다
기능 테스트로는 어려운 오류 상황 시뮬레이션도 단위 테스트라면 쉽게 할 수 있다

### 4.1.2 팀 생산성 향상

단위 테스트를 잘 수행하면 다른 컴포넌트가 완료될 때까지 기다리지 않고도 품질 높은 코드를 납품할 수 있다
기능 테스트는 상대적으로 정밀한 테스트를 하지 못하고 테스트 하려면 동작하는 기능이 준비되어야 한다


### 4.1.3 회귀 테스트 수행 및 디버깅 감소

리팩토링 이나 새 기능을 추가하기 위해 코드를 수정해도 좋다는 확신을 안겨준다
단위 테스트는 어떤 메서드가 어떤 이유로 실패했는지 이야기 해준다

### 4.1.4 확신에 찬 리팩토링

단위 테스트가 없다면 어느 코드를 수정했을 때 제품코드에 어떤 영향이 생기게 될지 빠른 시간안에 알기 힘들다
물론 알 수는 있지만... 단위 테스트가 존재하면 그 속도가 배로 향상된다

하나의 유스케이스나 기능만을 위해 설계와 구현을 하면 일단은 기 기능에 적합한 구조가 나올진 모르나
차후에 더해질 기능에는 적합하지 않을 가능성이 있다. 리팩토링이 필요한 시점이다.

리팩토링이 기존 코드를 망가뜨리지 않는다고 어떻게 확신할 수 있을까?
단위테스트는 어느 부분의 코드가 망가졌는지를 알려준다.

> 즉, 단위 테스트는 리팩토링에 대한 확신을 심어준다.

### 4.1.5 구현 품질 향상

단위 테스트는 대상 api 가 유연하고 독립적으로 테스트 가능하게 만들어질 것을 강요한다.
단위 테스트하기 어려운 코드?? 단위테스트가 가능하게끔 리팩토링 해라. 혹은 TDD 를 따라라

### 4.1.6 기대 행위 문서화

단위 테스트는 api 또는 특정 기능의 사용법을 보여주는 예제이다.
기능의 인풋과 아웃풋, 그리고 예외상황을 알려준다.

### 4.1.7 코드 커버리지 등 각종 측정이 가능

코드 커버리지, 빌드 성공/실패 추이.
수행 성능을 측정하여 이전 빌드 대비 안 좋은 결과가 나오면 실패하는 테스트를 작성하는 것도 가능하다


## 4.2 테스트의 종류

테스트 종류
- Acceptance testing
- Stress/load testing
- Functional testing
- Integration testing
- Unit testing

아래에서 위로 갈 수록 기능 검증의 비중이 커지고 애플리케이션의 더 많은 부분이 준비되어 있어야 수행이 가능하다

### 4.2.1 소프트웨어 테스트의 네 가지 종류

통합 테스트
- 컴포넌트간의 상호작용을 테스트 하는 것
- 대상 클래스를 로딩하고 실행하는 테스트가 유닛테스트다
- 유닛테스트의 클래스를 다른 메서드나 서비스와 연동시키는 것이 통합테스트다

- 객체 간 상호작용 : 객체 생성, 객체에 정의된 메서드 호출
- 서비스 간 상호작용 : 서블릿이나 EJB 컨테이너는 데이터베이스에 연결되거나 , 필요한 외부 자원,기기를 사용할 수 있다
- 서브 시스템 간 상호작용 : 프론트엔드로부터 요청이 잘 전달되어 백엔드가 적절히 응답하는지를 검사할 수 있다

기능 테스트
- 애플리케이션을 유스케이스 단위로 테스트

스트레스 테스트
- 대부분의 스트레스 테스트는 주어진 단위 시간 동안 애플리케이션이 얼마나 많은 요청을 처리할 수 있는가를 검사한다
- 미리 프로그램된 요청을 자동으로 보내면서 애플리케이션이 반응하는 속도를 추적한다
- 보통 이러한 속도 응답의 정확성은 간과하기 때문에 정확성 확인을 위한 테스트도 병행해줘야한다
- 성능 테스트 1규칙, 하지말라! : 풀어야 할 명확한 문제가 없는 한 코드 최적화에 시간을 허비하지 마라
  즉, 코드 최적화 전에 성능 테스트가 반드시 선행 되어야 한다는 것이다.

인수 테스트
- 고객과 이해관계자가 정의한 모든 목적에 부합되는지 확인해보고자 하는 테스트
- 모든 종류의 테스트를 포함할 수 있다.
- 궁금하면 다른곳에서 더 알아봐!


### 4.2.2 단위 테스트의 종류 세 가지


